{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - TravelHub</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800;900&display=swap"
          rel="stylesheet">

    <!-- Main Base CSS -->
    <link rel="stylesheet" href="{% static 'apps/css/main_base.css' %}">

    <!-- Forgot Password CSS -->
    <link rel="stylesheet" href="{% static 'apps/css/auth/forgot_password.css' %}">
</head>
<body>

<!-- Animated Background -->
<div class="animated-background">
    <div class="gradient-bg"></div>
    <canvas id="particles-canvas"></canvas>
</div>

<!-- Floating Travel Icons -->
<div class="floating-icons">
    <i class="fas fa-plane float-icon" style="--i: 1"></i>
    <i class="fas fa-globe-americas float-icon" style="--i: 2"></i>
    <i class="fas fa-umbrella-beach float-icon" style="--i: 3"></i>
    <i class="fas fa-compass float-icon" style="--i: 4"></i>
    <i class="fas fa-map-marked-alt float-icon" style="--i: 5"></i>
    <i class="fas fa-camera float-icon" style="--i: 6"></i>
    <i class="fas fa-suitcase-rolling float-icon" style="--i: 7"></i>
    <i class="fas fa-mountain float-icon" style="--i: 8"></i>
</div>

<!-- Forgot Password Container -->
<div class="forgot-container">

    <!-- Back to Login Button -->
    <a href="{% url 'login_page' %}" class="back-login">
        <i class="fas fa-arrow-left"></i>
        <span>Back to Login</span>
    </a>

    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon" id="theme-icon"></i>
    </button>

    <!-- Forgot Password Card -->
    <div class="forgot-card" id="forgotCard">

        <!-- Logo -->
        <div class="forgot-logo">
            <div class="logo-icon">
                <i class="fas fa-compass"></i>
            </div>
            <h2>TravelHub</h2>
        </div>

        <!-- Title with Icon -->
        <div class="forgot-title">
            <div class="title-icon">
                <i class="fas fa-key"></i>
            </div>
            <h1>Forgot Password?</h1>
            <p>No worries! Enter your email address and we'll send you a link to reset your password.</p>
        </div>

        <!-- Django Messages -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}"
                     style="margin-bottom: 20px; padding: 15px; border-radius: 12px; background-color: {% if message.tags == 'success' %}#10b981{% elif message.tags == 'error' %}#ef4444{% else %}#3b82f6{% endif %}; color: white;">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <!-- Forgot Password Form -->
        <form method="post" action="{% url 'forgot_password_page' %}">
            {% csrf_token %}

            <!-- Email Input -->
            <div class="input-group" id="emailGroup">
                <div class="input-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                <input
                        type="email"
                        id="email"
                        name="email"
                        required
                        autocomplete="email"
                >
                <label for="email">Email Address</label>
                <div class="input-border"></div>
                <span class="error-message" id="emailError"></span>
                <i class="fas fa-check-circle success-icon"></i>
            </div>

            <!-- Info Box -->
            <div class="info-box">
                <i class="fas fa-info-circle"></i>
                <p>We'll send you an email with instructions to reset your password. The link will expire in 1 hour.</p>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="submit-btn" id="submitBtn">
                <span class="btn-text">
                    <span>Send Reset Link</span>
                    <i class="fas fa-paper-plane"></i>
                </span>
                <span class="btn-loader">
                    <i class="fas fa-spinner fa-spin"></i>
                </span>
                <span class="btn-success">
                    <i class="fas fa-check"></i>
                    <span>Email Sent!</span>
                </span>
            </button>

            <!-- Back to Login Link -->
            <div class="login-link">
                Remember your password?
                <a href="{% url 'login_page' %}">Login here</a>
            </div>
        </form>

    </div>

</div>

<!-- Success Animation -->
<div class="success-animation" id="successAnimation">
    <div class="success-icon-large">
        <i class="fas fa-check"></i>
    </div>
    <h3>Email Sent Successfully!</h3>
    <p>Please check your inbox for password reset instructions.</p>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast">
    <div class="toast-icon">
        <i id="toastIcon" class="fas fa-check-circle"></i>
    </div>
    <div class="toast-content">
        <h4 id="toastTitle">Success</h4>
        <p id="toastMessage">Operation completed successfully</p>
    </div>
    <button class="toast-close" onclick="closeToast()">
        <i class="fas fa-times"></i>
    </button>
    <div class="toast-progress"></div>
</div>

<!-- Success Confetti -->
<canvas id="confetti-canvas"></canvas>

<!-- Forgot Password JS -->
<script src="{% static 'apps/js/forgot_password.js' %}"></script>

</body>
</html>