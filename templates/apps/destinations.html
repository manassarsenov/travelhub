{% extends 'apps/main_base.html' %}
{% load static %}

{% block title %}
<title>Discover Amazing Destinations | TravelHub</title>
{% endblock %}

{% block custom_css %}
<link rel="stylesheet" href="{% static 'apps/css/destinations.css' %}">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
{% endblock %}

{% block main_content %}

<!-- Hero Section with Parallax -->
<section class="destinations-hero">
    <div class="hero-parallax-bg"></div>
    <div class="hero-overlay"></div>

    <div class="hero-content">
        <div class="hero-badge animate-float">
            <i class="fas fa-globe-americas"></i>
            <span>200+ Destinations Worldwide</span>
        </div>

        <h1 class="hero-title">
            Explore <span class="gradient-text">Amazing</span> Destinations
        </h1>

        <p class="hero-subtitle">
            From ancient wonders to modern marvels, discover your next unforgettable journey
        </p>

        <!-- Advanced Search Bar -->
        <div class="hero-search-container">
            <div class="search-wrapper">
                <div class="search-input-group">
                    <i class="fas fa-map-marker-alt"></i>
                    <input type="text"
                           id="destination-search"
                           placeholder="Where do you want to go?"
                           autocomplete="off">
                    <div id="search-suggestions" class="search-suggestions"></div>
                </div>

                <div class="search-divider"></div>

                <div class="search-input-group">
                    <i class="fas fa-calendar-alt"></i>
                    <input type="text"
                           id="date-range"
                           placeholder="Select dates"
                           readonly>
                </div>

                <div class="search-divider"></div>

                <div class="search-input-group">
                    <i class="fas fa-user-friends"></i>
                    <input type="text"
                           id="travelers"
                           placeholder="Travelers"
                           readonly
                           onclick="toggleTravelersDropdown()">
                    <div id="travelers-dropdown" class="travelers-dropdown">
                        <div class="traveler-option">
                            <div>
                                <h4>Adults</h4>
                                <p>Ages 18+</p>
                            </div>
                            <div class="counter">
                                <button onclick="updateCount('adults', -1)">-</button>
                                <span id="adults-count">2</span>
                                <button onclick="updateCount('adults', 1)">+</button>
                            </div>
                        </div>
                        <div class="traveler-option">
                            <div>
                                <h4>Children</h4>
                                <p>Ages 2-17</p>
                            </div>
                            <div class="counter">
                                <button onclick="updateCount('children', -1)">-</button>
                                <span id="children-count">0</span>
                                <button onclick="updateCount('children', 1)">+</button>
                            </div>
                        </div>
                        <div class="traveler-option">
                            <div>
                                <h4>Infants</h4>
                                <p>Under 2</p>
                            </div>
                            <div class="counter">
                                <button onclick="updateCount('infants', -1)">-</button>
                                <span id="infants-count">0</span>
                                <button onclick="updateCount('infants', 1)">+</button>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="search-btn" onclick="searchDestinations()">
                    <i class="fas fa-search"></i>
                    <span>Search</span>
                </button>
            </div>

            <!-- Quick Filters -->
            <div class="quick-filters">
                <button class="quick-filter active" data-filter="all">
                    <i class="fas fa-globe"></i>
                    All Destinations
                </button>
                <button class="quick-filter" data-filter="popular">
                    <i class="fas fa-fire"></i>
                    Popular
                </button>
                <button class="quick-filter" data-filter="beach">
                    <i class="fas fa-umbrella-beach"></i>
                    Beach
                </button>
                <button class="quick-filter" data-filter="mountain">
                    <i class="fas fa-mountain"></i>
                    Mountain
                </button>
                <button class="quick-filter" data-filter="city">
                    <i class="fas fa-city"></i>
                    City
                </button>
                <button class="quick-filter" data-filter="adventure">
                    <i class="fas fa-hiking"></i>
                    Adventure
                </button>
            </div>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator">
        <div class="mouse">
            <div class="wheel"></div>
        </div>
        <p>Scroll to explore</p>
    </div>
</section>

<!-- Featured Destinations Carousel -->
<section class="featured-section">
    <div class="container">
        <div class="section-header">
            <div class="section-badge">
                <i class="fas fa-star"></i>
                <span>Featured</span>
            </div>
            <h2>Trending <span class="gradient-text">Destinations</span></h2>
            <p>Handpicked by our travel experts</p>
        </div>

        <div class="featured-carousel">
            <button class="carousel-btn prev" onclick="moveFeatured(-1)">
                <i class="fas fa-chevron-left"></i>
            </button>

            <div class="featured-track">
                <!-- Featured Card 1 -->
                <div class="featured-card">
                    <div class="featured-image">
                        <img src="https://images.unsplash.com/photo-1512453979798-5ea266f8880c" alt="Dubai">
                        <div class="featured-badge">Hot Deal</div>
                        <button class="wishlist-btn" onclick="toggleWishlist(this)">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                    <div class="featured-content">
                        <div class="destination-header">
                            <div>
                                <h3>Dubai</h3>
                                <p><i class="fas fa-map-marker-alt"></i> United Arab Emirates</p>
                            </div>
                            <div class="rating">
                                <i class="fas fa-star"></i>
                                <span>4.9</span>
                            </div>
                        </div>
                        <p class="description">Experience luxury and adventure in the city of gold</p>
                        <div class="destination-stats">
                            <div class="stat">
                                <i class="fas fa-hotel"></i>
                                <span>850+ Hotels</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-sun"></i>
                                <span>32¬∞C Avg</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-plane"></i>
                                <span>Direct Flights</span>
                            </div>
                        </div>
                        <div class="destination-footer">
                            <div class="price">
                                <span class="from">From</span>
                                <span class="amount">$899</span>
                                <span class="per">/ person</span>
                            </div>
                            <button class="btn-primary" onclick="viewDetails(1)">
                                View Details
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Featured Card 2 -->
                <div class="featured-card">
                    <div class="featured-image">
                        <img src="https://images.unsplash.com/photo-1552832230-c0197dd311b5" alt="Rome">
                        <div class="featured-badge popular">Popular</div>
                        <button class="wishlist-btn" onclick="toggleWishlist(this)">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                    <div class="featured-content">
                        <div class="destination-header">
                            <div>
                                <h3>Rome</h3>
                                <p><i class="fas fa-map-marker-alt"></i> Italy</p>
                            </div>
                            <div class="rating">
                                <i class="fas fa-star"></i>
                                <span>4.8</span>
                            </div>
                        </div>
                        <p class="description">Step back in time in the Eternal City</p>
                        <div class="destination-stats">
                            <div class="stat">
                                <i class="fas fa-hotel"></i>
                                <span>920+ Hotels</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-sun"></i>
                                <span>22¬∞C Avg</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-landmark"></i>
                                <span>Historical</span>
                            </div>
                        </div>
                        <div class="destination-footer">
                            <div class="price">
                                <span class="from">From</span>
                                <span class="amount">$1,299</span>
                                <span class="per">/ person</span>
                            </div>
                            <button class="btn-primary" onclick="viewDetails(2)">
                                View Details
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Featured Card 3 -->
                <div class="featured-card">
                    <div class="featured-image">
                        <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4" alt="Bali">
                        <div class="featured-badge new">New</div>
                        <button class="wishlist-btn" onclick="toggleWishlist(this)">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                    <div class="featured-content">
                        <div class="destination-header">
                            <div>
                                <h3>Bali</h3>
                                <p><i class="fas fa-map-marker-alt"></i> Indonesia</p>
                            </div>
                            <div class="rating">
                                <i class="fas fa-star"></i>
                                <span>4.9</span>
                            </div>
                        </div>
                        <p class="description">Paradise island with stunning beaches and culture</p>
                        <div class="destination-stats">
                            <div class="stat">
                                <i class="fas fa-hotel"></i>
                                <span>670+ Hotels</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-sun"></i>
                                <span>28¬∞C Avg</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-umbrella-beach"></i>
                                <span>Beach</span>
                            </div>
                        </div>
                        <div class="destination-footer">
                            <div class="price">
                                <span class="from">From</span>
                                <span class="amount">$799</span>
                                <span class="per">/ person</span>
                            </div>
                            <button class="btn-primary" onclick="viewDetails(3)">
                                View Details
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <button class="carousel-btn next" onclick="moveFeatured(1)">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>
</section>

<!-- Main Content Area -->
<section class="main-destinations">
    <div class="container-fluid">
        <div class="destinations-layout">

            <!-- Sidebar Filters -->
            <aside class="filters-sidebar">
                <div class="filters-header">
                    <h3>Filters</h3>
                    <button class="clear-filters" onclick="clearAllFilters()">
                        <i class="fas fa-redo"></i>
                        Clear All
                    </button>
                </div>

                <!-- View Toggle -->
                <div class="view-toggle">
                    <button class="view-btn active" onclick="switchView('grid')">
                        <i class="fas fa-th"></i>
                    </button>
                    <button class="view-btn" onclick="switchView('list')">
                        <i class="fas fa-list"></i>
                    </button>
                    <button class="view-btn" onclick="switchView('map')">
                        <i class="fas fa-map"></i>
                    </button>
                </div>

                <!-- Price Range Filter -->
                <div class="filter-group">
                    <h4>
                        <i class="fas fa-dollar-sign"></i>
                        Price Range
                    </h4>
                    <div class="price-range-slider">
                        <input type="range" id="min-price" min="0" max="5000" value="0">
                        <input type="range" id="max-price" min="0" max="5000" value="5000">
                    </div>
                    <div class="price-values">
                        <span>$<span id="min-price-value">0</span></span>
                        <span>$<span id="max-price-value">5000</span></span>
                    </div>
                </div>

                <!-- Region Filter -->
                <div class="filter-group">
                    <h4>
                        <i class="fas fa-globe-asia"></i>
                        Region
                    </h4>
                    <div class="filter-options">
                        <label class="filter-checkbox">
                            <input type="checkbox" name="region" value="asia">
                            <span>Asia</span>
                            <span class="count">(45)</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="region" value="europe">
                            <span>Europe</span>
                            <span class="count">(67)</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="region" value="africa">
                            <span>Africa</span>
                            <span class="count">(23)</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="region" value="americas">
                            <span>Americas</span>
                            <span class="count">(38)</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="region" value="oceania">
                            <span>Oceania</span>
                            <span class="count">(12)</span>
                        </label>
                    </div>
                </div>

                <!-- Trip Type Filter -->
                <div class="filter-group">
                    <h4>
                        <i class="fas fa-suitcase"></i>
                        Trip Type
                    </h4>
                    <div class="filter-options">
                        <label class="filter-checkbox">
                            <input type="checkbox" name="type" value="adventure">
                            <span>Adventure</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="type" value="beach">
                            <span>Beach & Relaxation</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="type" value="cultural">
                            <span>Cultural</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="type" value="nature">
                            <span>Nature & Wildlife</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="type" value="city">
                            <span>City Tours</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="type" value="romantic">
                            <span>Romantic</span>
                        </label>
                    </div>
                </div>

                <!-- Duration Filter -->
                <div class="filter-group">
                    <h4>
                        <i class="fas fa-clock"></i>
                        Duration
                    </h4>
                    <div class="filter-options">
                        <label class="filter-radio">
                            <input type="radio" name="duration" value="weekend">
                            <span>Weekend (1-3 days)</span>
                        </label>
                        <label class="filter-radio">
                            <input type="radio" name="duration" value="short">
                            <span>Short Trip (4-7 days)</span>
                        </label>
                        <label class="filter-radio">
                            <input type="radio" name="duration" value="long">
                            <span>Long Vacation (8-14 days)</span>
                        </label>
                        <label class="filter-radio">
                            <input type="radio" name="duration" value="extended">
                            <span>Extended (15+ days)</span>
                        </label>
                    </div>
                </div>

                <!-- Rating Filter -->
                <div class="filter-group">
                    <h4>
                        <i class="fas fa-star"></i>
                        Rating
                    </h4>
                    <div class="filter-options">
                        <label class="filter-checkbox">
                            <input type="checkbox" name="rating" value="5">
                            <span>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="rating" value="4">
                            <span>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                & up
                            </span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="rating" value="3">
                            <span>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                <i class="far fa-star"></i>
                                & up
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Activities Filter -->
                <div class="filter-group">
                    <h4>
                        <i class="fas fa-hiking"></i>
                        Activities
                    </h4>
                    <div class="filter-options">
                        <label class="filter-checkbox">
                            <input type="checkbox" name="activity" value="hiking">
                            <span>Hiking & Trekking</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="activity" value="watersports">
                            <span>Water Sports</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="activity" value="shopping">
                            <span>Shopping</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="activity" value="nightlife">
                            <span>Nightlife</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="activity" value="food">
                            <span>Food & Cuisine</span>
                        </label>
                    </div>
                </div>

                <!-- Best Season Filter -->
                <div class="filter-group">
                    <h4>
                        <i class="fas fa-calendar-alt"></i>
                        Best Season
                    </h4>
                    <div class="filter-options">
                        <label class="filter-checkbox">
                            <input type="checkbox" name="season" value="spring">
                            <span>üå∏ Spring</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="season" value="summer">
                            <span>‚òÄÔ∏è Summer</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="season" value="autumn">
                            <span>üçÇ Autumn</span>
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" name="season" value="winter">
                            <span>‚ùÑÔ∏è Winter</span>
                        </label>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="destinations-main">

                <!-- Results Header -->
                <div class="results-header">
                    <div class="results-info">
                        <h3>Found <span class="highlight">156</span> destinations</h3>
                        <p>Based on your preferences</p>
                    </div>

                    <div class="results-controls">
                        <div class="sort-dropdown">
                            <button class="sort-btn" onclick="toggleSortDropdown()">
                                <i class="fas fa-sort-amount-down"></i>
                                <span>Sort by</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div id="sort-dropdown" class="dropdown-menu">
                                <button onclick="sortDestinations('popular')">Most Popular</button>
                                <button onclick="sortDestinations('price-low')">Price: Low to High</button>
                                <button onclick="sortDestinations('price-high')">Price: High to Low</button>
                                <button onclick="sortDestinations('rating')">Highest Rated</button>
                                <button onclick="sortDestinations('name')">Name A-Z</button>
                            </div>
                        </div>

                        <button class="compare-btn" onclick="openComparison()">
                            <i class="fas fa-balance-scale"></i>
                            Compare (<span id="compare-count">0</span>)
                        </button>
                    </div>
                </div>

                <!-- Destinations Grid -->
                <div id="destinations-grid" class="destinations-grid">

                    <!-- Destination Card 1 -->
                    <article class="destination-card">
                        <div class="card-image-wrapper">
                            <div class="image-slider">
                                <img src="https://images.unsplash.com/photo-1564507592333-c60657eea523" alt="Samarkand">
                                <img src="https://images.unsplash.com/photo-1588431945498-87016d6e2c79" alt="Samarkand">
                                <img src="https://images.unsplash.com/photo-1559827260-dc66d52bef19" alt="Samarkand">
                            </div>
                            <button class="slider-btn prev" onclick="slideImage(this, -1)">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="slider-btn next" onclick="slideImage(this, 1)">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                            <div class="image-dots">
                                <span class="dot active"></span>
                                <span class="dot"></span>
                                <span class="dot"></span>
                            </div>
                            <div class="card-badges">
                                <span class="badge popular">Popular</span>
                                <span class="badge deal">-20%</span>
                            </div>
                            <button class="wishlist-btn" onclick="toggleWishlist(this)">
                                <i class="far fa-heart"></i>
                            </button>
                            <label class="compare-checkbox">
                                <input type="checkbox" onchange="addToCompare(this)">
                                <span>Compare</span>
                            </label>
                        </div>

                        <div class="card-content">
                            <div class="card-header">
                                <div class="destination-info">
                                    <h3>Samarkand</h3>
                                    <p class="location">
                                        <i class="fas fa-map-marker-alt"></i>
                                        Uzbekistan, Central Asia
                                    </p>
                                </div>
                                <div class="rating-box">
                                    <div class="rating-stars">
                                        <i class="fas fa-star"></i>
                                        <span>4.8</span>
                                    </div>
                                    <p class="reviews">(2,341 reviews)</p>
                                </div>
                            </div>

                            <p class="card-description">
                                Discover the ancient Silk Road with stunning Islamic architecture and vibrant bazaars
                            </p>

                            <div class="card-tags">
                                <span class="tag"><i class="fas fa-landmark"></i> Cultural</span>
                                <span class="tag"><i class="fas fa-history"></i> Historical</span>
                                <span class="tag"><i class="fas fa-dollar-sign"></i> Budget</span>
                            </div>

                            <div class="card-stats">
                                <div class="stat-item">
                                    <i class="fas fa-hotel"></i>
                                    <span>120+ Hotels</span>
                                </div>
                                <div class="stat-item">
                                    <i class="fas fa-plane"></i>
                                    <span>Direct Flights</span>
                                </div>
                                <div class="stat-item">
                                    <i class="fas fa-thermometer-half"></i>
                                    <span>25¬∞C Avg</span>
                                </div>
                                <div class="stat-item">
                                    <i class="fas fa-clock"></i>
                                    <span>5-7 Days</span>
                                </div>
                            </div>

                            <div class="card-footer">
                                <div class="price-box">
                                    <div class="price-original">$749</div>
                                    <div class="price-current">
                                        <span class="from">From</span>
                                        <span class="amount">$599</span>
                                        <span class="per">/ person</span>
                                    </div>
                                </div>
                                <div class="card-actions">
                                    <button class="btn-outline" onclick="viewDetails(4)">
                                        Details
                                    </button>
                                    <button class="btn-primary" onclick="quickBook(4)">
                                        Book Now
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- More destination cards would be generated dynamically -->
                    <!-- This is just a template structure -->

                </div>

                <!-- Load More -->
                <div class="load-more-container">
                    <button class="btn-load-more" onclick="loadMoreDestinations()">
                        <i class="fas fa-spinner"></i>
                        Load More Destinations
                    </button>
                    <p class="showing-text">Showing 12 of 156 destinations</p>
                </div>

            </main>

        </div>
    </div>
</section>

<!-- Interactive Map Section -->
<section id="map-view" class="map-section" style="display: none;">
    <div class="map-container">
        <div id="destinations-map"></div>
        <div class="map-overlay-card">
            <h3>Explore on Map</h3>
            <p>Click on markers to view destination details</p>
            <button class="btn-outline" onclick="closeMapView()">
                <i class="fas fa-times"></i>
                Close Map
            </button>
        </div>
    </div>
</section>

<!-- AI Recommendation Section -->
<section class="ai-recommendation">
    <div class="container">
        <div class="ai-box">
            <div class="ai-icon">
                <i class="fas fa-robot"></i>
            </div>
            <div class="ai-content">
                <h3>Get AI-Powered Recommendations</h3>
                <p>Tell us your preferences and let our AI suggest perfect destinations for you</p>
            </div>
            <button class="btn-ai" onclick="openAIRecommendation()">
                <i class="fas fa-magic"></i>
                Get Personalized Suggestions
            </button>
        </div>
    </div>
</section>

<!-- Comparison Modal -->
<div id="comparison-modal" class="modal-overlay">
    <div class="modal-container comparison-modal">
        <div class="modal-header">
            <h2>Compare Destinations</h2>
            <button class="modal-close" onclick="closeComparison()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div id="comparison-grid" class="comparison-grid">
                <!-- Comparison cards will be inserted here -->
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block custom_js %}
<script src="{% static 'apps/js/destinations.js' %}"></script>
{% endblock %}